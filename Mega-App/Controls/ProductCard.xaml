<UserControl x:Class="MegaApp.Controls.ProductCard"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             Width="350" Margin="10">
    <Border Background="{StaticResource BrushBackground}" 
            CornerRadius="16" BorderThickness="1" 
            BorderBrush="{StaticResource BrushBorder}" 
            ClipToBounds="True">
        <Grid x:Name="MainGrid">
            <StackPanel>
                <Grid Height="250" Background="{StaticResource BrushMuted}">
                    <Image Source="{Binding Image}" Stretch="UniformToFill">
                        <Image.Style>
                            <Style TargetType="Image">
                                <Style.Triggers>
                                    <DataTrigger Binding="{Binding IsMouseOver, ElementName=MainGrid}" Value="True">
                                        <DataTrigger.EnterActions>
                                            <BeginStoryboard>
                                                <Storyboard>
                                                    <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleX)" To="1.1" Duration="0:0:0.5"/>
                                                    <DoubleAnimation Storyboard.TargetProperty="(RenderTransform).(ScaleTransform.ScaleY)" To="1.1" Duration="0:0:0.5"/>
                                                </Storyboard>
                                            </BeginStoryboard>
                                        </DataTrigger.EnterActions>
                                    </DataTrigger>
                                </Style.Triggers>
                            </Style>
                        </Image.Style>
                        <Image.RenderTransform>
                            <ScaleTransform CenterX="175" CenterY="125"/>
                        </Image.RenderTransform>
                    </Image>

                    <Border Visibility="{Binding IsNew, Converter={StaticResource BooleanToVisibilityConverter}}"
                            Background="{StaticResource BrushPrimary}" CornerRadius="4" 
                            HorizontalAlignment="Left" VerticalAlignment="Top" Margin="16" Padding="8,4">
                        <TextBlock Text="NEW" Foreground="White" FontSize="10" FontWeight="Bold"/>
                    </Border>

                    <Button HorizontalAlignment="Right" VerticalAlignment="Top" Margin="16" 
                            Style="{StaticResource RoundIconButton}">
                        <Path Data="M12.1,18.55L12,18.65L11.89,18.55C7.14,14.24 4,11.39 4,8.5C4,6.5 5.5,5 7.5,5C8.64,5 9.73,5.54 10.43,6.4L12,8.41L13.57,6.4C14.27,5.54 15.36,5 16.5,5C18.5,5 20,6.5 20,8.5C20,11.39 16.86,14.24 12.1,18.55M16.5,3C14.76,3 13.09,3.81 12,5.08C10.91,3.81 9.24,3 7.5,3C4.42,3 2,5.41 2,8.5C2,12.27 5.4,15.37 10.55,20.03L12,21.35L13.45,20.03C18.6,15.37 22,12.27 22,8.5C22,5.41 19.58,3 16.5,3Z" 
                              Fill="#374151" Width="18" Stretch="Uniform"/>
                    </Button>
                </Grid>

                <StackPanel  Margin="24">
                    <StackPanel Orientation="Horizontal" Margin="0,0,0,8">
                        <Path Data="M12,17.27L18.18,21L16.54,13.97L22,9.24L14.81,8.62L12,2L9.19,8.62L2,9.24L7.45,13.97L5.82,21L12,17.27Z" 
                              Fill="#FACC15" Width="16" Margin="0,0,4,0"/>
                        <TextBlock Text="{Binding Rating}" FontWeight="Medium" FontSize="14"/>
                        <TextBlock Text="{Binding Category, StringFormat=' • {0}'}" Foreground="{StaticResource BrushMutedForeground}" FontSize="14" Margin="4,0,0,0"/>
                    </StackPanel>

                    <TextBlock Text="{Binding Name}" FontSize="18" FontWeight="Bold" Margin="0,0,0,16"/>

                    <Grid>
                        <TextBlock Text="{Binding Price, StringFormat='${0:F2}'}" FontSize="24" FontWeight="Bold" VerticalAlignment="Center"/>
                        <Button HorizontalAlignment="Right" Style="{StaticResource ShoppingCartButtonStyle}">
                            <Path Data="M17,18A2,2 0 0,1 19,20A2,2 0 0,1 17,22C15.89,22 15,21.1 15,20C15,18.89 15.89,18 17,18M1,2H4.27L5.21,4H20A1,1 0 0,1 21,5C21,5.17 20.95,5.34 20.88,5.5L17.3,11.97C16.96,12.58 16.3,13 15.55,13H8.1L7.2,14.63L7.17,14.75A0.25,0.25 0 0,0 7.42,15H19V17H7A2,2 0 0,1 5,15C5,14.65 5.07,14.31 5.24,14L6.6,11.59L3,4H1V2M7,18A2,2 0 0,1 9,20A2,2 0 0,1 7,22C5.89,22 5,21.1 5,20C5,18.89 5.89,18 7,18Z" 
                                  Fill="{StaticResource ColorPrimary}" Width="20" Stretch="Uniform"/>
                        </Button>
                    </Grid>
                </StackPanel>
            </StackPanel>
        </Grid>
    </Border>
</UserControl>